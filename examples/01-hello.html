<!DOCTYPE html>
<meta charset="utf-8" />
<title>PAN â€“ 01 Hello</title>
<pan-bus></pan-bus>
<x-counter></x-counter>
<script type="module">
  import { PanClient } from '../dist/pan-client.js';
  import '../dist/pan-bus.js';

  customElements.define('x-counter', class extends HTMLElement{
    pc = new PanClient(this); n = 0;
    connectedCallback(){
      this.innerHTML = `<button>Clicked 0</button>`;
      this.querySelector('button').onclick = () => this.pc.publish({ topic:'demo:click', data:{ n: ++this.n }, retain:true });
      this.pc.subscribe('demo:click', (m) => { this.querySelector('button').textContent = `Clicked ${m.data.n}`; });
    }
  });
</script>
