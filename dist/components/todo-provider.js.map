{
  "version": 3,
  "sources": ["../../pan/components/todo-provider.mjs"],
  "sourcesContent": ["// Todo provider component - manages todo state and broadcasts changes\nimport { PanClient } from './pan-client.mjs';\n\nclass TodoProvider extends HTMLElement {\n  pc = new PanClient(this);\n  items = [];\n\n  connectedCallback() {\n    const boot = () => {\n      this.pc.subscribe('todos.change', (m) => {\n        this.items.push(m.data.item);\n        this.#broadcast();\n      });\n\n      this.pc.subscribe('todos.remove', (m) => {\n        this.items = this.items.filter((t) => t.id !== m.data.id);\n        this.#broadcast();\n      });\n\n      this.pc.subscribe('todos.toggle', (m) => {\n        const t = this.items.find((x) => x.id === m.data.id);\n        if (t) t.done = !!m.data.done;\n        this.#broadcast();\n      });\n\n      this.#broadcast();\n    };\n\n    if (window.__panReady) {\n      boot();\n    } else {\n      document.addEventListener('pan:sys.ready', boot, { once: true });\n    }\n  }\n\n  #broadcast() {\n    this.pc.publish({\n      topic: 'todos.state',\n      data: { items: this.items },\n      retain: true\n    });\n  }\n}\n\ncustomElements.define('todo-provider', TodoProvider);\nexport default TodoProvider;\n"],
  "mappings": "AACA,SAAS,iBAAiB;AAE1B,MAAM,qBAAqB,YAAY;AAAA,EACrC,KAAK,IAAI,UAAU,IAAI;AAAA,EACvB,QAAQ,CAAC;AAAA,EAET,oBAAoB;AAClB,UAAM,OAAO,MAAM;AACjB,WAAK,GAAG,UAAU,gBAAgB,CAAC,MAAM;AACvC,aAAK,MAAM,KAAK,EAAE,KAAK,IAAI;AAC3B,aAAK,WAAW;AAAA,MAClB,CAAC;AAED,WAAK,GAAG,UAAU,gBAAgB,CAAC,MAAM;AACvC,aAAK,QAAQ,KAAK,MAAM,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE;AACxD,aAAK,WAAW;AAAA,MAClB,CAAC;AAED,WAAK,GAAG,UAAU,gBAAgB,CAAC,MAAM;AACvC,cAAM,IAAI,KAAK,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE;AACnD,YAAI,EAAG,GAAE,OAAO,CAAC,CAAC,EAAE,KAAK;AACzB,aAAK,WAAW;AAAA,MAClB,CAAC;AAED,WAAK,WAAW;AAAA,IAClB;AAEA,QAAI,OAAO,YAAY;AACrB,WAAK;AAAA,IACP,OAAO;AACL,eAAS,iBAAiB,iBAAiB,MAAM,EAAE,MAAM,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,GAAG,QAAQ;AAAA,MACd,OAAO;AAAA,MACP,MAAM,EAAE,OAAO,KAAK,MAAM;AAAA,MAC1B,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AACF;AAEA,eAAe,OAAO,iBAAiB,YAAY;AACnD,IAAO,wBAAQ;",
  "names": []
}
