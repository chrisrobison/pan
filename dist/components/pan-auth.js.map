{
  "version": 3,
  "sources": ["../../src/components/pan-auth.mjs"],
  "sourcesContent": ["/**\n * pan-auth - JWT Authentication Manager\n *\n * Manages authentication state via PAN message bus\n * - Stores JWT tokens in localStorage/sessionStorage/memory\n * - Publishes retained auth.state for connectors to use\n * - Handles login/logout/refresh flows\n * - Auto-refreshes tokens before expiry\n *\n * @example\n * <pan-auth\n *   storage=\"localStorage\"\n *   token-key=\"jwt\"\n *   refresh-key=\"refresh_jwt\"\n *   auto-refresh=\"true\"\n *   refresh-before=\"300\"\n *   login-endpoint=\"/api/auth/login\"\n *   refresh-endpoint=\"/api/auth/refresh\">\n * </pan-auth>\n */\n\nimport { PanClient } from './pan-client.mjs';\n\nclass PanAuth extends HTMLElement {\n  static get observedAttributes() {\n    return ['storage', 'token-key', 'refresh-key', 'auto-refresh', 'refresh-before', 'login-endpoint', 'refresh-endpoint'];\n  }\n\n  constructor() {\n    super();\n    this.pc = new PanClient(this);\n    this.authState = {\n      authenticated: false,\n      token: null, // Token is in HttpOnly cookie, this is just for state tracking\n      refreshToken: null, // Refresh token is in HttpOnly cookie\n      user: null,\n      expiresAt: null\n    };\n    this.refreshTimer = null;\n    this.useHttpOnlyCookies = true; // Use HttpOnly cookies for security\n  }\n\n  connectedCallback() {\n    // Configuration\n    this.config = {\n      storage: this.getAttribute('storage') || 'localStorage', // localStorage, sessionStorage, memory\n      tokenKey: this.getAttribute('token-key') || 'pan_jwt',\n      refreshKey: this.getAttribute('refresh-key') || 'pan_refresh_jwt',\n      autoRefresh: this.getAttribute('auto-refresh') !== 'false',\n      refreshBefore: parseInt(this.getAttribute('refresh-before') || '300', 10), // seconds before expiry\n      loginEndpoint: this.getAttribute('login-endpoint') || '/api/auth/login',\n      refreshEndpoint: this.getAttribute('refresh-endpoint') || '/api/auth/refresh',\n      logoutEndpoint: this.getAttribute('logout-endpoint') || '/api/auth/logout'\n    };\n\n    // Load existing tokens from storage\n    this.loadTokens();\n\n    // Set up message handlers\n    this.setupHandlers();\n\n    // Publish initial auth state\n    this.publishAuthState();\n\n    // Start auto-refresh if enabled and token exists\n    if (this.config.autoRefresh && this.authState.authenticated) {\n      this.scheduleRefresh();\n    }\n  }\n\n  disconnectedCallback() {\n    if (this.refreshTimer) {\n      clearTimeout(this.refreshTimer);\n    }\n  }\n\n  setupHandlers() {\n    // Handle login requests\n    this.pc.subscribe('auth.login', async (msg) => {\n      await this.handleLogin(msg);\n    });\n\n    // Handle logout requests\n    this.pc.subscribe('auth.logout', async (msg) => {\n      await this.handleLogout(msg);\n    });\n\n    // Handle refresh requests\n    this.pc.subscribe('auth.refresh', async (msg) => {\n      await this.handleRefresh(msg);\n    });\n\n    // Handle token set (external login)\n    this.pc.subscribe('auth.setToken', (msg) => {\n      this.setToken(msg.data);\n    });\n\n    // Handle check auth request\n    this.pc.subscribe('auth.check', (msg) => {\n      this.publishAuthState();\n    });\n  }\n\n  async handleLogin(msg) {\n    const { email, password, username, credentials, endpoint } = msg.data;\n    const loginUrl = endpoint || this.config.loginEndpoint;\n\n    try {\n      // Prepare login payload\n      const payload = credentials || { email, password, username };\n\n      // Make login request\n      const response = await fetch(loginUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.token) {\n        // Store tokens and update state\n        this.setToken({\n          token: data.token,\n          refreshToken: data.refreshToken || data.refresh_token,\n          user: data.user\n        });\n\n        // Reply with success\n        if (msg.replyTo) {\n          this.pc.publish({\n            topic: msg.replyTo,\n            data: { ok: true, user: this.authState.user },\n            correlationId: msg.correlationId\n          });\n        }\n\n        // Publish success event\n        this.pc.publish({\n          topic: 'auth.login.success',\n          data: { user: this.authState.user }\n        });\n      } else {\n        // Reply with error\n        const error = data.error || data.message || 'Login failed';\n\n        if (msg.replyTo) {\n          this.pc.publish({\n            topic: msg.replyTo,\n            data: { ok: false, error },\n            correlationId: msg.correlationId\n          });\n        }\n\n        // Publish error event\n        this.pc.publish({\n          topic: 'auth.login.error',\n          data: { error }\n        });\n      }\n    } catch (error) {\n      // Reply with error\n      if (msg.replyTo) {\n        this.pc.publish({\n          topic: msg.replyTo,\n          data: { ok: false, error: error.message },\n          correlationId: msg.correlationId\n        });\n      }\n\n      // Publish error event\n      this.pc.publish({\n        topic: 'auth.login.error',\n        data: { error: error.message }\n      });\n    }\n  }\n\n  async handleLogout(msg) {\n    const endpoint = msg.data?.endpoint || this.config.logoutEndpoint;\n\n    try {\n      // Optionally call logout endpoint\n      if (endpoint && this.authState.token) {\n        await fetch(endpoint, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${this.authState.token}`\n          }\n        });\n      }\n    } catch (error) {\n      console.warn('Logout endpoint failed:', error);\n    }\n\n    // Clear tokens regardless of endpoint result\n    this.clearTokens();\n\n    // Reply if needed\n    if (msg.replyTo) {\n      this.pc.publish({\n        topic: msg.replyTo,\n        data: { ok: true },\n        correlationId: msg.correlationId\n      });\n    }\n\n    // Publish logout event\n    this.pc.publish({\n      topic: 'auth.logout.success',\n      data: {}\n    });\n  }\n\n  async handleRefresh(msg) {\n    if (!this.authState.refreshToken) {\n      // No refresh token available\n      if (msg.replyTo) {\n        this.pc.publish({\n          topic: msg.replyTo,\n          data: { ok: false, error: 'No refresh token available' },\n          correlationId: msg.correlationId\n        });\n      }\n      return;\n    }\n\n    const endpoint = msg.data?.endpoint || this.config.refreshEndpoint;\n\n    try {\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.authState.refreshToken}`\n        },\n        body: JSON.stringify({\n          refreshToken: this.authState.refreshToken\n        })\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.token) {\n        // Update tokens\n        this.setToken({\n          token: data.token,\n          refreshToken: data.refreshToken || data.refresh_token || this.authState.refreshToken,\n          user: data.user || this.authState.user\n        });\n\n        // Reply with success\n        if (msg.replyTo) {\n          this.pc.publish({\n            topic: msg.replyTo,\n            data: { ok: true },\n            correlationId: msg.correlationId\n          });\n        }\n\n        // Publish refresh success\n        this.pc.publish({\n          topic: 'auth.refresh.success',\n          data: {}\n        });\n      } else {\n        // Refresh failed - clear tokens\n        this.clearTokens();\n\n        // Reply with error\n        if (msg.replyTo) {\n          this.pc.publish({\n            topic: msg.replyTo,\n            data: { ok: false, error: 'Token refresh failed' },\n            correlationId: msg.correlationId\n          });\n        }\n\n        // Publish refresh error\n        this.pc.publish({\n          topic: 'auth.refresh.error',\n          data: { error: 'Token refresh failed' }\n        });\n      }\n    } catch (error) {\n      // Refresh error - clear tokens\n      this.clearTokens();\n\n      // Reply with error\n      if (msg.replyTo) {\n        this.pc.publish({\n          topic: msg.replyTo,\n          data: { ok: false, error: error.message },\n          correlationId: msg.correlationId\n        });\n      }\n\n      // Publish refresh error\n      this.pc.publish({\n        topic: 'auth.refresh.error',\n        data: { error: error.message }\n      });\n    }\n  }\n\n  setToken({ token, refreshToken, user }) {\n    // Decode JWT to get expiration\n    const decoded = this.decodeJWT(token);\n    const expiresAt = decoded?.exp ? decoded.exp * 1000 : null;\n\n    // Update state\n    this.authState = {\n      authenticated: true,\n      token,\n      refreshToken: refreshToken || this.authState.refreshToken,\n      user: user || decoded || this.authState.user,\n      expiresAt\n    };\n\n    // Store tokens\n    this.storeTokens();\n\n    // Publish auth state\n    this.publishAuthState();\n\n    // Schedule refresh if auto-refresh enabled\n    if (this.config.autoRefresh && expiresAt) {\n      this.scheduleRefresh();\n    }\n  }\n\n  clearTokens() {\n    // Clear state\n    this.authState = {\n      authenticated: false,\n      token: null,\n      refreshToken: null,\n      user: null,\n      expiresAt: null\n    };\n\n    // Remove from storage\n    const storage = this.getStorage();\n    if (storage) {\n      storage.removeItem(this.config.tokenKey);\n      storage.removeItem(this.config.refreshKey);\n    }\n\n    // Clear refresh timer\n    if (this.refreshTimer) {\n      clearTimeout(this.refreshTimer);\n      this.refreshTimer = null;\n    }\n\n    // Publish auth state\n    this.publishAuthState();\n  }\n\n  loadTokens() {\n    // SECURITY: When using HttpOnly cookies, tokens are not accessible from JavaScript\n    // Check authentication status via API call instead\n    if (this.useHttpOnlyCookies) {\n      // Token is in HttpOnly cookie, check auth status via API\n      fetch(this.config.loginEndpoint.replace('/login', '/check'), {\n        credentials: 'include'\n      })\n        .then(res => res.json())\n        .then(data => {\n          if (data.authenticated) {\n            this.authState = {\n              authenticated: true,\n              token: null, // Not accessible from JS (in HttpOnly cookie)\n              refreshToken: null, // Not accessible from JS\n              user: data.user,\n              expiresAt: null // Set by server\n            };\n            this.publishAuthState();\n          }\n        })\n        .catch(err => {\n          console.error('Failed to check auth status:', err);\n        });\n      return;\n    }\n\n    // Legacy: localStorage (NOT RECOMMENDED)\n    const storage = this.getStorage();\n    if (!storage) return;\n\n    const token = storage.getItem(this.config.tokenKey);\n    const refreshToken = storage.getItem(this.config.refreshKey);\n\n    if (token) {\n      const decoded = this.decodeJWT(token);\n      const expiresAt = decoded?.exp ? decoded.exp * 1000 : null;\n\n      // Check if token is expired\n      if (expiresAt && Date.now() > expiresAt) {\n        // Token expired - clear it\n        this.clearTokens();\n        return;\n      }\n\n      // Token valid\n      this.authState = {\n        authenticated: true,\n        token,\n        refreshToken,\n        user: decoded,\n        expiresAt\n      };\n      console.warn('\u26A0 Loading tokens from localStorage - vulnerable to XSS');\n    }\n  }\n\n  storeTokens() {\n    // SECURITY: When using HttpOnly cookies, tokens are stored server-side in cookies\n    // Do NOT store in localStorage as it's vulnerable to XSS\n    if (this.useHttpOnlyCookies) {\n      console.log('\u2713 Tokens stored in HttpOnly cookies (server-side)');\n      return;\n    }\n\n    // Legacy: localStorage storage (NOT RECOMMENDED - vulnerable to XSS)\n    const storage = this.getStorage();\n    if (!storage) return;\n\n    if (this.authState.token) {\n      storage.setItem(this.config.tokenKey, this.authState.token);\n      console.warn('\u26A0 Token stored in localStorage - vulnerable to XSS. Use HttpOnly cookies instead.');\n    }\n\n    if (this.authState.refreshToken) {\n      storage.setItem(this.config.refreshKey, this.authState.refreshToken);\n      console.warn('\u26A0 Refresh token stored in localStorage - vulnerable to XSS. Use HttpOnly cookies instead.');\n    }\n  }\n\n  getStorage() {\n    switch (this.config.storage) {\n      case 'localStorage':\n        return typeof window !== 'undefined' ? window.localStorage : null;\n      case 'sessionStorage':\n        return typeof window !== 'undefined' ? window.sessionStorage : null;\n      case 'memory':\n        return null; // Memory only - already in this.authState\n      default:\n        return typeof window !== 'undefined' ? window.localStorage : null;\n    }\n  }\n\n  publishAuthState() {\n    // Publish retained auth state (NEVER include tokens for security)\n    this.pc.publish({\n      topic: 'auth.state',\n      data: {\n        authenticated: this.authState.authenticated,\n        user: this.authState.user,\n        expiresAt: this.authState.expiresAt,\n        hasRefreshToken: !!this.authState.refreshToken,\n        useHttpOnlyCookies: this.useHttpOnlyCookies\n      },\n      retain: true\n    });\n\n    // SECURITY: Do NOT publish tokens over the bus\n    // Tokens are in HttpOnly cookies and sent automatically with fetch()\n    // Legacy connectors that need tokens should use fetch with credentials: 'include'\n    this.pc.publish({\n      topic: 'auth.internal.state',\n      data: {\n        authenticated: this.authState.authenticated,\n        user: this.authState.user,\n        expiresAt: this.authState.expiresAt,\n        // NEVER include token/refreshToken here - use HttpOnly cookies\n        token: null,\n        refreshToken: null\n      },\n      retain: true\n    });\n  }\n\n  scheduleRefresh() {\n    // Clear existing timer\n    if (this.refreshTimer) {\n      clearTimeout(this.refreshTimer);\n    }\n\n    if (!this.authState.expiresAt) return;\n\n    const now = Date.now();\n    const expiresAt = this.authState.expiresAt;\n    const refreshAt = expiresAt - (this.config.refreshBefore * 1000);\n    const delay = refreshAt - now;\n\n    if (delay > 0) {\n      this.refreshTimer = setTimeout(() => {\n        this.pc.publish({ topic: 'auth.refresh', data: {} });\n      }, delay);\n    }\n  }\n\n  decodeJWT(token) {\n    try {\n      const base64Url = token.split('.')[1];\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      const jsonPayload = decodeURIComponent(\n        atob(base64)\n          .split('')\n          .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\n          .join('')\n      );\n      return JSON.parse(jsonPayload);\n    } catch (error) {\n      console.error('Failed to decode JWT:', error);\n      return null;\n    }\n  }\n}\n\ncustomElements.define('pan-auth', PanAuth);\n\nexport default PanAuth;\n"],
  "mappings": "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",
  "names": []
}
