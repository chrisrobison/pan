{
  "version": 3,
  "sources": ["../../pan/components/todo-list.mjs"],
  "sourcesContent": ["// Todo list component - subscribes to todo state and publishes user actions\nimport { PanClient } from './pan-client.mjs';\n\n// Helper: UUID fallback\nconst uid = () => (globalThis.crypto && typeof crypto.randomUUID === 'function')\n  ? crypto.randomUUID()\n  : `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 10)}`;\n\nclass TodoList extends HTMLElement {\n  pc = new PanClient(this);\n  items = [];\n\n  connectedCallback() {\n    this.attachShadow({ mode: 'open' });\n    this.#render();\n    this.pc.subscribe('todos.state', (m) => {\n      this.items = m.data.items;\n      this.#render();\n    }, { retained: true });\n  }\n\n  #render() {\n    const h = String.raw;\n    this.shadowRoot.innerHTML = h`\n      <style>\n        :host{display:block;font:15px/1.5 var(--font, \"Lexend\", sans-serif);}\n        form{display:flex;gap:0.65rem;margin-bottom:0.9rem;}\n        input{flex:1;padding:0.65rem 0.75rem;border-radius:0.8rem;border:1px solid rgba(15,23,42,0.12);}\n        button{padding:0.65rem 1rem;border-radius:0.8rem;border:none;background:var(--color-accent,#2563eb);color:white;font-weight:600;cursor:pointer;}\n        button:hover{background:#1d4ed8;}\n        ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:0.4rem;}\n        li{display:flex;align-items:center;gap:0.75rem;padding:0.55rem 0.75rem;border:1px solid rgba(15,23,42,0.1);border-radius:0.9rem;background:rgba(255,255,255,0.9);}\n        li.done .t{text-decoration:line-through;color:var(--color-muted,#5f6b84);}\n        .muted{color:var(--color-muted,#5f6b84);}\n        .spacer{flex:1;}\n        .del{border:none;background:transparent;color:#ef4444;font-size:1.1rem;cursor:pointer;}\n      </style>\n      <form id=\"f\">\n        <input id=\"title\" placeholder=\"Add a task\u2026\" />\n        <button type=\"submit\">Add</button>\n      </form>\n      ${this.items.length ? '' : '<div class=\"muted\">No tasks yet.</div>'}\n      <ul>\n        ${this.items.map((t) => `\n          <li class=\"${t.done ? 'done' : ''}\" data-id=\"${t.id}\">\n            <input type=\"checkbox\" ${t.done ? 'checked' : ''} aria-label=\"toggle\" />\n            <span class=\"t\">${this.#escape(t.title)}</span>\n            <span class=\"spacer\"></span>\n            <button class=\"del\" title=\"Remove\">\u2715</button>\n          </li>\n        `).join('')}\n      </ul>\n    `;\n\n    const form = this.shadowRoot.querySelector('#f');\n    const title = this.shadowRoot.querySelector('#title');\n    form?.addEventListener('submit', (e) => {\n      e.preventDefault();\n      const value = title.value.trim();\n      if (!value) return;\n      title.value = '';\n      this.pc.publish({\n        topic: 'todos.change',\n        data: { item: { id: uid(), title: value, done: false } },\n        retain: true\n      });\n    });\n\n    this.shadowRoot.querySelectorAll('li input[type=checkbox]').forEach((cb) => {\n      cb.addEventListener('change', (e) => {\n        const li = e.target.closest('li');\n        const id = li?.dataset.id;\n        this.pc.publish({\n          topic: 'todos.toggle',\n          data: { id, done: e.target.checked },\n          retain: true\n        });\n      });\n    });\n\n    this.shadowRoot.querySelectorAll('li .del').forEach((btn) => {\n      btn.addEventListener('click', (e) => {\n        const li = e.target.closest('li');\n        const id = li?.dataset.id;\n        this.pc.publish({\n          topic: 'todos.remove',\n          data: { id },\n          retain: true\n        });\n      });\n    });\n  }\n\n  #escape(s) {\n    return String(s).replace(/[&<>\"']/g, (c) => ({\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    }[c]));\n  }\n}\n\ncustomElements.define('todo-list', TodoList);\nexport default TodoList;\n"],
  "mappings": "AACA,SAAS,iBAAiB;AAG1B,MAAM,MAAM,MAAO,WAAW,UAAU,OAAO,OAAO,eAAe,aACjE,OAAO,WAAW,IAClB,GAAG,KAAK,IAAI,EAAE,SAAS,EAAE,CAAC,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,GAAG,EAAE,CAAC;AAEzE,MAAM,iBAAiB,YAAY;AAAA,EACjC,KAAK,IAAI,UAAU,IAAI;AAAA,EACvB,QAAQ,CAAC;AAAA,EAET,oBAAoB;AAClB,SAAK,aAAa,EAAE,MAAM,OAAO,CAAC;AAClC,SAAK,QAAQ;AACb,SAAK,GAAG,UAAU,eAAe,CAAC,MAAM;AACtC,WAAK,QAAQ,EAAE,KAAK;AACpB,WAAK,QAAQ;AAAA,IACf,GAAG,EAAE,UAAU,KAAK,CAAC;AAAA,EACvB;AAAA,EAEA,UAAU;AACR,UAAM,IAAI,OAAO;AACjB,SAAK,WAAW,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAkBxB,KAAK,MAAM,SAAS,KAAK,wCAAwC;AAAA;AAAA,UAE/D,KAAK,MAAM,IAAI,CAAC,MAAM;AAAA,uBACT,EAAE,OAAO,SAAS,EAAE,cAAc,EAAE,EAAE;AAAA,qCACxB,EAAE,OAAO,YAAY,EAAE;AAAA,8BAC9B,KAAK,QAAQ,EAAE,KAAK,CAAC;AAAA;AAAA;AAAA;AAAA,SAI1C,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAIf,UAAM,OAAO,KAAK,WAAW,cAAc,IAAI;AAC/C,UAAM,QAAQ,KAAK,WAAW,cAAc,QAAQ;AACpD,UAAM,iBAAiB,UAAU,CAAC,MAAM;AACtC,QAAE,eAAe;AACjB,YAAM,QAAQ,MAAM,MAAM,KAAK;AAC/B,UAAI,CAAC,MAAO;AACZ,YAAM,QAAQ;AACd,WAAK,GAAG,QAAQ;AAAA,QACd,OAAO;AAAA,QACP,MAAM,EAAE,MAAM,EAAE,IAAI,IAAI,GAAG,OAAO,OAAO,MAAM,MAAM,EAAE;AAAA,QACvD,QAAQ;AAAA,MACV,CAAC;AAAA,IACH,CAAC;AAED,SAAK,WAAW,iBAAiB,yBAAyB,EAAE,QAAQ,CAAC,OAAO;AAC1E,SAAG,iBAAiB,UAAU,CAAC,MAAM;AACnC,cAAM,KAAK,EAAE,OAAO,QAAQ,IAAI;AAChC,cAAM,KAAK,IAAI,QAAQ;AACvB,aAAK,GAAG,QAAQ;AAAA,UACd,OAAO;AAAA,UACP,MAAM,EAAE,IAAI,MAAM,EAAE,OAAO,QAAQ;AAAA,UACnC,QAAQ;AAAA,QACV,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC;AAED,SAAK,WAAW,iBAAiB,SAAS,EAAE,QAAQ,CAAC,QAAQ;AAC3D,UAAI,iBAAiB,SAAS,CAAC,MAAM;AACnC,cAAM,KAAK,EAAE,OAAO,QAAQ,IAAI;AAChC,cAAM,KAAK,IAAI,QAAQ;AACvB,aAAK,GAAG,QAAQ;AAAA,UACd,OAAO;AAAA,UACP,MAAM,EAAE,GAAG;AAAA,UACX,QAAQ;AAAA,QACV,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAG;AACT,WAAO,OAAO,CAAC,EAAE,QAAQ,YAAY,CAAC,OAAO;AAAA,MAC3C,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,IACP,GAAE,CAAC,CAAE;AAAA,EACP;AACF;AAEA,eAAe,OAAO,aAAa,QAAQ;AAC3C,IAAO,oBAAQ;",
  "names": []
}
