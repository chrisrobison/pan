{
  "version": 3,
  "sources": ["../../src/components/pan-inspector.mjs"],
  "sourcesContent": ["// Minimal PAN Inspector. Displays recent messages and basic controls.\n\nimport { PanClient } from './pan-client.mjs';\n\nclass PanInspector extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.pc = new PanClient(this);\n    this.events = []; // { ts, topic, msg, size }\n    this.paused = false;\n    this.filter = '';\n  }\n\n  connectedCallback() {\n    this.render();\n    this.off = this.pc.subscribe('*', (m) => {\n      if (this.paused) return;\n      const rec = { ts: Date.now(), topic: m.topic, msg: m, size: JSON.stringify(m).length };\n      this.events.push(rec); if (this.events.length > 1000) this.events.shift();\n      this.renderRows();\n    });\n    this.shadowRoot.addEventListener('input', (e) => {\n      const t = e.target; if (t && t.id === 'filter') { this.filter = t.value; this.renderRows(); }\n    });\n    this.shadowRoot.addEventListener('click', (e) => {\n      const el = e.target;\n      if (el && el.id === 'pause') { this.paused = !this.paused; this.renderControls(); }\n      if (el && el.id === 'clear') { this.events = []; this.renderRows(); }\n      if (el && el.classList && el.classList.contains('replay')) {\n        const i = Number(el.getAttribute('data-i')); const rec = this.events[i]; if (rec) this.pc.publish(rec.msg);\n      }\n    });\n  }\n\n  disconnectedCallback() { this.off && this.off(); }\n\n  render() {\n    const h = String.raw;\n    this.shadowRoot.innerHTML = h`\n      <style>\n        :host{display:block; font:12px/1.4 ui-monospace, SFMono-Regular, Menlo, monospace;}\n        header{display:flex; gap:8px; align-items:center; margin-bottom:8px}\n        input[type=text]{flex:1; padding:4px 6px;}\n        button{padding:4px 8px;}\n        table{width:100%; border-collapse: collapse;}\n        th,td{ padding:4px 6px; border-bottom:1px solid #eee; text-align:left }\n        th{ position:sticky; top:0; background:#f8f8f8; }\n        .muted{ color:#888 }\n      </style>\n      <header>\n        <input id=\"filter\" type=\"text\" placeholder=\"Filter by topic\u2026\" />\n        <button id=\"pause\">${this.paused ? 'Resume' : 'Pause'}</button>\n        <button id=\"clear\">Clear</button>\n      </header>\n      <table>\n        <thead><tr><th>time</th><th>topic</th><th>size</th><th></th></tr></thead>\n        <tbody id=\"rows\"></tbody>\n      </table>\n    `;\n    this.renderRows();\n  }\n\n  renderControls() {\n    const btn = this.shadowRoot.getElementById('pause');\n    if (btn) btn.textContent = this.paused ? 'Resume' : 'Pause';\n  }\n\n  renderRows() {\n    const rows = this.shadowRoot.getElementById('rows'); if (!rows) return;\n    const f = (this.filter || '').toLowerCase();\n    const visible = this.events.filter((r) => !f || r.topic.toLowerCase().includes(f));\n    rows.innerHTML = visible.slice(-500).map((r, i) => `\n      <tr>\n        <td>${new Date(r.ts).toLocaleTimeString()}</td>\n        <td>${r.topic}</td>\n        <td>${r.size}</td>\n        <td><button class=\"replay\" data-i=\"${i}\">Replay</button></td>\n      </tr>\n    `).join('');\n  }\n}\n\ncustomElements.define('pan-inspector', PanInspector);\nexport { PanInspector };\nexport default PanInspector;\n\n"],
  "mappings": "AAEA,SAAS,iBAAiB;AAE1B,MAAM,qBAAqB,YAAY;AAAA,EACrC,cAAc;AACZ,UAAM;AACN,SAAK,aAAa,EAAE,MAAM,OAAO,CAAC;AAClC,SAAK,KAAK,IAAI,UAAU,IAAI;AAC5B,SAAK,SAAS,CAAC;AACf,SAAK,SAAS;AACd,SAAK,SAAS;AAAA,EAChB;AAAA,EAEA,oBAAoB;AAClB,SAAK,OAAO;AACZ,SAAK,MAAM,KAAK,GAAG,UAAU,KAAK,CAAC,MAAM;AACvC,UAAI,KAAK,OAAQ;AACjB,YAAM,MAAM,EAAE,IAAI,KAAK,IAAI,GAAG,OAAO,EAAE,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,EAAE,OAAO;AACrF,WAAK,OAAO,KAAK,GAAG;AAAG,UAAI,KAAK,OAAO,SAAS,IAAM,MAAK,OAAO,MAAM;AACxE,WAAK,WAAW;AAAA,IAClB,CAAC;AACD,SAAK,WAAW,iBAAiB,SAAS,CAAC,MAAM;AAC/C,YAAM,IAAI,EAAE;AAAQ,UAAI,KAAK,EAAE,OAAO,UAAU;AAAE,aAAK,SAAS,EAAE;AAAO,aAAK,WAAW;AAAA,MAAG;AAAA,IAC9F,CAAC;AACD,SAAK,WAAW,iBAAiB,SAAS,CAAC,MAAM;AAC/C,YAAM,KAAK,EAAE;AACb,UAAI,MAAM,GAAG,OAAO,SAAS;AAAE,aAAK,SAAS,CAAC,KAAK;AAAQ,aAAK,eAAe;AAAA,MAAG;AAClF,UAAI,MAAM,GAAG,OAAO,SAAS;AAAE,aAAK,SAAS,CAAC;AAAG,aAAK,WAAW;AAAA,MAAG;AACpE,UAAI,MAAM,GAAG,aAAa,GAAG,UAAU,SAAS,QAAQ,GAAG;AACzD,cAAM,IAAI,OAAO,GAAG,aAAa,QAAQ,CAAC;AAAG,cAAM,MAAM,KAAK,OAAO,CAAC;AAAG,YAAI,IAAK,MAAK,GAAG,QAAQ,IAAI,GAAG;AAAA,MAC3G;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,uBAAuB;AAAE,SAAK,OAAO,KAAK,IAAI;AAAA,EAAG;AAAA,EAEjD,SAAS;AACP,UAAM,IAAI,OAAO;AACjB,SAAK,WAAW,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAaH,KAAK,SAAS,WAAW,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQzD,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,iBAAiB;AACf,UAAM,MAAM,KAAK,WAAW,eAAe,OAAO;AAClD,QAAI,IAAK,KAAI,cAAc,KAAK,SAAS,WAAW;AAAA,EACtD;AAAA,EAEA,aAAa;AACX,UAAM,OAAO,KAAK,WAAW,eAAe,MAAM;AAAG,QAAI,CAAC,KAAM;AAChE,UAAM,KAAK,KAAK,UAAU,IAAI,YAAY;AAC1C,UAAM,UAAU,KAAK,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,YAAY,EAAE,SAAS,CAAC,CAAC;AACjF,SAAK,YAAY,QAAQ,MAAM,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAAA;AAAA,cAEzC,IAAI,KAAK,EAAE,EAAE,EAAE,mBAAmB,CAAC;AAAA,cACnC,EAAE,KAAK;AAAA,cACP,EAAE,IAAI;AAAA,6CACyB,CAAC;AAAA;AAAA,KAEzC,EAAE,KAAK,EAAE;AAAA,EACZ;AACF;AAEA,eAAe,OAAO,iBAAiB,YAAY;AAEnD,IAAO,wBAAQ;",
  "names": []
}
