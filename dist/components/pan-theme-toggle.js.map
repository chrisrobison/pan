{
  "version": 3,
  "sources": ["../../src/components/pan-theme-toggle.mjs"],
  "sourcesContent": ["/**\n * pan-theme-toggle\n *\n * A theme toggle button component that communicates with pan-theme-provider via PAN.\n * Displays current theme and allows switching between light, dark, and auto modes.\n *\n * Usage:\n *   <pan-theme-toggle></pan-theme-toggle>\n *\n * Attributes:\n *   - label: Optional label text (default: none, just icons)\n *   - variant: 'button' | 'icon' | 'dropdown' (default: 'icon')\n *\n * Listens to PAN topics:\n *   - theme.changed: Updates UI to reflect current theme\n *   - theme.system-changed: Updates auto mode indicator\n */\nexport class PanThemeToggle extends HTMLElement {\n  static observedAttributes = ['label', 'variant'];\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._currentTheme = 'auto';\n    this._effectiveTheme = 'light';\n  }\n\n  connectedCallback() {\n    this.render();\n    this._setupPanListeners();\n    this._requestCurrentTheme();\n  }\n\n  disconnectedCallback() {\n    this._teardownPanListeners();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue !== newValue) {\n      this.render();\n    }\n  }\n\n  render() {\n    const variant = this.getAttribute('variant') || 'icon';\n    const label = this.getAttribute('label') || '';\n\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: inline-block;\n        }\n\n        .toggle-container {\n          display: inline-flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        button {\n          background: var(--color-surface, #ffffff);\n          border: 1px solid var(--color-border, #e2e8f0);\n          border-radius: 0.5rem;\n          padding: 0.5rem 0.75rem;\n          cursor: pointer;\n          display: inline-flex;\n          align-items: center;\n          gap: 0.5rem;\n          color: var(--color-text, #1e293b);\n          font-family: var(--font-sans, system-ui);\n          font-size: 0.875rem;\n          transition: all 0.2s ease;\n        }\n\n        button:hover {\n          background: var(--color-bg-alt, #f8fafc);\n          border-color: var(--color-border-strong, #cbd5e1);\n        }\n\n        button:active {\n          transform: scale(0.98);\n        }\n\n        .icon {\n          width: 1.25rem;\n          height: 1.25rem;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .label {\n          font-weight: 500;\n        }\n\n        /* Icon-only variant */\n        .icon-only {\n          padding: 0.5rem;\n        }\n\n        /* Dropdown variant */\n        .dropdown {\n          position: relative;\n        }\n\n        .dropdown-menu {\n          position: absolute;\n          top: 100%;\n          right: 0;\n          margin-top: 0.5rem;\n          background: var(--color-surface, #ffffff);\n          border: 1px solid var(--color-border, #e2e8f0);\n          border-radius: 0.5rem;\n          box-shadow: var(--shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1));\n          padding: 0.5rem;\n          min-width: 150px;\n          z-index: 1000;\n          display: none;\n        }\n\n        .dropdown-menu.open {\n          display: block;\n        }\n\n        .dropdown-item {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          padding: 0.5rem 0.75rem;\n          border-radius: 0.375rem;\n          cursor: pointer;\n          transition: background 0.15s ease;\n          color: var(--color-text, #1e293b);\n        }\n\n        .dropdown-item:hover {\n          background: var(--color-bg-alt, #f8fafc);\n        }\n\n        .dropdown-item.active {\n          background: var(--color-primary-soft, #cce6f5);\n          color: var(--color-primary, #006699);\n          font-weight: 500;\n        }\n\n        /* Theme icons */\n        .theme-icon {\n          width: 1rem;\n          height: 1rem;\n        }\n      </style>\n      <div class=\"toggle-container\">\n        ${variant === 'dropdown' ? this._renderDropdown() : this._renderButton(label, variant)}\n      </div>\n    `;\n\n    this._attachEventListeners();\n  }\n\n  _renderButton(label, variant) {\n    const iconClass = variant === 'icon' ? 'icon-only' : '';\n    const icon = this._getThemeIcon(this._effectiveTheme);\n\n    return `\n      <button class=\"toggle-btn ${iconClass}\" aria-label=\"Toggle theme\">\n        <span class=\"icon\">${icon}</span>\n        ${label ? `<span class=\"label\">${label}</span>` : ''}\n      </button>\n    `;\n  }\n\n  _renderDropdown() {\n    const icon = this._getThemeIcon(this._effectiveTheme);\n\n    return `\n      <div class=\"dropdown\">\n        <button class=\"toggle-btn dropdown-trigger\" aria-label=\"Toggle theme\">\n          <span class=\"icon\">${icon}</span>\n        </button>\n        <div class=\"dropdown-menu\">\n          <div class=\"dropdown-item\" data-theme=\"light\">\n            <span class=\"theme-icon\">${this._getThemeIcon('light')}</span>\n            <span>Light</span>\n          </div>\n          <div class=\"dropdown-item\" data-theme=\"dark\">\n            <span class=\"theme-icon\">${this._getThemeIcon('dark')}</span>\n            <span>Dark</span>\n          </div>\n          <div class=\"dropdown-item\" data-theme=\"auto\">\n            <span class=\"theme-icon\">${this._getThemeIcon('auto')}</span>\n            <span>Auto</span>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _getThemeIcon(theme) {\n    const icons = {\n      light: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" width=\"20\" height=\"20\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z\" />\n      </svg>`,\n      dark: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" width=\"20\" height=\"20\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z\" />\n      </svg>`,\n      auto: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" width=\"20\" height=\"20\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25\" />\n      </svg>`\n    };\n    return icons[theme] || icons.auto;\n  }\n\n  _attachEventListeners() {\n    const variant = this.getAttribute('variant') || 'icon';\n\n    if (variant === 'dropdown') {\n      const trigger = this.shadowRoot.querySelector('.dropdown-trigger');\n      const menu = this.shadowRoot.querySelector('.dropdown-menu');\n      const items = this.shadowRoot.querySelectorAll('.dropdown-item');\n\n      trigger?.addEventListener('click', (e) => {\n        e.stopPropagation();\n        menu?.classList.toggle('open');\n      });\n\n      items.forEach(item => {\n        item.addEventListener('click', (e) => {\n          const theme = item.dataset.theme;\n          if (theme) {\n            this._setTheme(theme);\n            menu?.classList.remove('open');\n          }\n        });\n      });\n\n      // Close dropdown when clicking outside\n      document.addEventListener('click', () => {\n        menu?.classList.remove('open');\n      });\n\n      // Update active state\n      this._updateDropdownActiveState();\n    } else {\n      const btn = this.shadowRoot.querySelector('.toggle-btn');\n      btn?.addEventListener('click', () => this._cycleTheme());\n    }\n  }\n\n  _cycleTheme() {\n    const cycle = { auto: 'light', light: 'dark', dark: 'auto' };\n    const nextTheme = cycle[this._currentTheme] || 'auto';\n    this._setTheme(nextTheme);\n  }\n\n  _setTheme(theme) {\n    const provider = this._getThemeProvider();\n    if (provider) {\n      provider.setTheme(theme);\n    } else {\n      // Fallback: set directly on document\n      document.documentElement.setAttribute('data-theme', theme);\n    }\n  }\n\n  _requestCurrentTheme() {\n    const provider = this._getThemeProvider();\n    if (provider) {\n      this._currentTheme = provider.getTheme();\n      this._effectiveTheme = provider.getEffectiveTheme();\n      this.render();\n    }\n  }\n\n  _getThemeProvider() {\n    return document.querySelector('pan-theme-provider');\n  }\n\n  _setupPanListeners() {\n    const bus = document.querySelector('pan-bus');\n    if (bus) {\n      this._themeChangedHandler = (data) => {\n        this._currentTheme = data.theme;\n        this._effectiveTheme = data.effective;\n        this.render();\n      };\n\n      bus.subscribe('theme.changed', this._themeChangedHandler);\n    }\n  }\n\n  _teardownPanListeners() {\n    const bus = document.querySelector('pan-bus');\n    if (bus && this._themeChangedHandler) {\n      bus.unsubscribe('theme.changed', this._themeChangedHandler);\n    }\n  }\n\n  _updateDropdownActiveState() {\n    const items = this.shadowRoot.querySelectorAll('.dropdown-item');\n    items.forEach(item => {\n      if (item.dataset.theme === this._currentTheme) {\n        item.classList.add('active');\n      } else {\n        item.classList.remove('active');\n      }\n    });\n  }\n}\n\ncustomElements.define('pan-theme-toggle', PanThemeToggle);\n"],
  "mappings": "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",
  "names": []
}
