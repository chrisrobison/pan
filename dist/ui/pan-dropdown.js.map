{
  "version": 3,
  "sources": ["../../src/ui/pan-dropdown.mjs"],
  "sourcesContent": ["// <pan-dropdown> \u2014 Dropdown menu with PAN topic integration\n// Attributes:\n//   - label: Button label\n//   - position: bottom-left, bottom-right, top-left, top-right (default: bottom-left)\n//   - topic: Topic prefix for events\n//   - items: JSON array of menu items [{label, value, icon?, disabled?}]\n//\n// Topics:\n//   - Publishes: {topic}.select { value, label }\n//   - Publishes: {topic}.opened, {topic}.closed\n//\n// Slots:\n//   - trigger: Custom trigger button\n//   - default: Custom menu items\n\nimport { PanClient } from './pan-client.mjs';\n\nexport class PanDropdown extends HTMLElement {\n  static get observedAttributes() {\n    return ['label', 'position', 'topic', 'items'];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.pc = new PanClient(this);\n    this.isOpen = false;\n  }\n\n  connectedCallback() {\n    this.render();\n    this.setupEvents();\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('click', this.handleOutsideClick);\n  }\n\n  attributeChangedCallback() {\n    if (this.isConnected) this.render();\n  }\n\n  get label() { return this.getAttribute('label') || 'Menu'; }\n  get position() { return this.getAttribute('position') || 'bottom-left'; }\n  get topic() { return this.getAttribute('topic') || 'dropdown'; }\n  get items() {\n    const attr = this.getAttribute('items');\n    if (!attr) return [];\n    try {\n      return JSON.parse(attr);\n    } catch {\n      return [];\n    }\n  }\n\n  setupEvents() {\n    const trigger = this.shadowRoot.querySelector('.dropdown-trigger');\n    const menu = this.shadowRoot.querySelector('.dropdown-menu');\n\n    if (trigger) {\n      trigger.addEventListener('click', (e) => {\n        e.stopPropagation();\n        this.toggle();\n      });\n    }\n\n    if (menu) {\n      menu.addEventListener('click', (e) => {\n        const item = e.target.closest('[data-value]');\n        if (item && !item.hasAttribute('disabled')) {\n          const value = item.dataset.value;\n          const label = item.textContent.trim();\n          this.selectItem(value, label);\n        }\n      });\n    }\n\n    // Close on outside click\n    this.handleOutsideClick = (e) => {\n      if (!this.contains(e.target) && this.isOpen) {\n        this.close();\n      }\n    };\n    document.addEventListener('click', this.handleOutsideClick);\n  }\n\n  toggle() {\n    this.isOpen ? this.close() : this.open();\n  }\n\n  open() {\n    if (this.isOpen) return;\n    this.isOpen = true;\n    const menu = this.shadowRoot.querySelector('.dropdown-menu');\n    if (menu) menu.classList.add('active');\n\n    this.pc.publish({\n      topic: `${this.topic}.opened`,\n      data: {}\n    });\n  }\n\n  close() {\n    if (!this.isOpen) return;\n    this.isOpen = false;\n    const menu = this.shadowRoot.querySelector('.dropdown-menu');\n    if (menu) menu.classList.remove('active');\n\n    this.pc.publish({\n      topic: `${this.topic}.closed`,\n      data: {}\n    });\n  }\n\n  selectItem(value, label) {\n    this.pc.publish({\n      topic: `${this.topic}.select`,\n      data: { value, label }\n    });\n    this.close();\n  }\n\n  render() {\n    const hasTriggerSlot = this.querySelector('[slot=\"trigger\"]');\n    const hasDefaultSlot = this.querySelector(':not([slot])');\n\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n\n        .dropdown-trigger {\n          display: inline-flex;\n          align-items: center;\n          gap: 0.5rem;\n          padding: 0.625rem 1rem;\n          background: var(--dropdown-trigger-bg, #ffffff);\n          border: 1px solid var(--dropdown-trigger-border, #e2e8f0);\n          border-radius: 0.5rem;\n          cursor: pointer;\n          font-family: inherit;\n          font-size: 0.95rem;\n          font-weight: 500;\n          color: var(--dropdown-trigger-color, #1e293b);\n          transition: all 0.2s;\n        }\n\n        .dropdown-trigger:hover {\n          background: var(--dropdown-trigger-hover-bg, #f8fafc);\n          border-color: var(--dropdown-trigger-hover-border, #cbd5e1);\n        }\n\n        .dropdown-arrow {\n          font-size: 0.75rem;\n          transition: transform 0.2s;\n        }\n\n        .dropdown-trigger.open .dropdown-arrow {\n          transform: rotate(180deg);\n        }\n\n        .dropdown-menu {\n          position: absolute;\n          min-width: 200px;\n          background: var(--dropdown-menu-bg, #ffffff);\n          border: 1px solid var(--dropdown-menu-border, #e2e8f0);\n          border-radius: 0.5rem;\n          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n          z-index: 1000;\n          opacity: 0;\n          visibility: hidden;\n          transform: translateY(-10px);\n          transition: all 0.2s ease;\n          padding: 0.5rem 0;\n        }\n\n        .dropdown-menu.active {\n          opacity: 1;\n          visibility: visible;\n          transform: translateY(0);\n        }\n\n        .dropdown-menu.position-bottom-left {\n          top: calc(100% + 0.5rem);\n          left: 0;\n        }\n\n        .dropdown-menu.position-bottom-right {\n          top: calc(100% + 0.5rem);\n          right: 0;\n        }\n\n        .dropdown-menu.position-top-left {\n          bottom: calc(100% + 0.5rem);\n          left: 0;\n        }\n\n        .dropdown-menu.position-top-right {\n          bottom: calc(100% + 0.5rem);\n          right: 0;\n        }\n\n        .dropdown-item {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          padding: 0.625rem 1rem;\n          cursor: pointer;\n          color: var(--dropdown-item-color, #334155);\n          font-size: 0.95rem;\n          transition: all 0.15s;\n          white-space: nowrap;\n        }\n\n        .dropdown-item:hover {\n          background: var(--dropdown-item-hover-bg, #f1f5f9);\n          color: var(--dropdown-item-hover-color, #1e293b);\n        }\n\n        .dropdown-item[disabled] {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        .dropdown-item[disabled]:hover {\n          background: transparent;\n        }\n\n        .dropdown-divider {\n          height: 1px;\n          background: var(--dropdown-divider-color, #e2e8f0);\n          margin: 0.5rem 0;\n        }\n\n        .item-icon {\n          font-size: 1rem;\n        }\n      </style>\n\n      <div class=\"dropdown\">\n        ${hasTriggerSlot ? `\n          <slot name=\"trigger\"></slot>\n        ` : `\n          <button class=\"dropdown-trigger ${this.isOpen ? 'open' : ''}\">\n            ${this.label}\n            <span class=\"dropdown-arrow\">\u25BC</span>\n          </button>\n        `}\n\n        <div class=\"dropdown-menu position-${this.position}\">\n          ${hasDefaultSlot ? `\n            <slot></slot>\n          ` : this.items.map(item => {\n            if (item.divider) {\n              return '<div class=\"dropdown-divider\"></div>';\n            }\n            return `\n              <div\n                class=\"dropdown-item\"\n                data-value=\"${item.value || item.label}\"\n                ${item.disabled ? 'disabled' : ''}\n              >\n                ${item.icon ? `<span class=\"item-icon\">${item.icon}</span>` : ''}\n                ${item.label}\n              </div>\n            `;\n          }).join('')}\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('pan-dropdown', PanDropdown);\nexport default PanDropdown;\n"],
  "mappings": "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",
  "names": []
}
