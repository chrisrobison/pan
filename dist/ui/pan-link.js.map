{
  "version": 3,
  "sources": ["../../pan/ui/pan-link.mjs"],
  "sourcesContent": ["// <pan-link> \u2014 Declarative navigation via PAN topics\n// Attributes:\n//   - to: target path\n//   - replace: use replaceState instead of pushState\n//   - active-class: CSS class to add when link matches current route (default: 'active')\n//   - exact: require exact match for active state (default: false)\n//\n// Usage:\n//   <pan-link to=\"/about\">About</pan-link>\n//   <pan-link to=\"/user/123\" replace>Profile</pan-link>\n\nimport { PanClient } from './pan-client.mjs';\n\nexport class PanLink extends HTMLElement {\n  static get observedAttributes() { return ['to', 'replace', 'active-class', 'exact']; }\n\n  constructor() {\n    super();\n    this.pc = new PanClient(this);\n    this.currentPath = '';\n  }\n\n  connectedCallback() {\n    this.#render();\n    this.#subscribe();\n\n    // Handle clicks\n    this.addEventListener('click', this.#handleClick);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('click', this.#handleClick);\n  }\n\n  attributeChangedCallback() {\n    if (this.isConnected) this.#render();\n  }\n\n  get to() { return this.getAttribute('to') || ''; }\n  get replace() { return this.hasAttribute('replace'); }\n  get activeClass() { return this.getAttribute('active-class') || 'active'; }\n  get exact() { return this.hasAttribute('exact'); }\n\n  #render() {\n    this.style.cursor = 'pointer';\n    this.style.textDecoration = this.style.textDecoration || 'none';\n    this.setAttribute('role', 'link');\n    this.setAttribute('tabindex', '0');\n\n    // Update active state\n    this.#updateActiveState();\n  }\n\n  #subscribe() {\n    // Listen to nav.state changes to update active class\n    this.pc.subscribe('nav.state', (msg) => {\n      this.currentPath = msg.data?.path || '';\n      this.#updateActiveState();\n    }, { retained: true });\n  }\n\n  #handleClick = (e) => {\n    e.preventDefault();\n\n    if (!this.to) return;\n\n    this.pc.publish({\n      topic: this.replace ? 'nav.replace' : 'nav.goto',\n      data: { path: this.to }\n    });\n  };\n\n  #updateActiveState() {\n    const isActive = this.exact\n      ? this.currentPath === this.to\n      : this.currentPath.startsWith(this.to);\n\n    if (isActive) {\n      this.classList.add(this.activeClass);\n    } else {\n      this.classList.remove(this.activeClass);\n    }\n  }\n}\n\ncustomElements.define('pan-link', PanLink);\nexport default PanLink;\n"],
  "mappings": "AAWA,SAAS,iBAAiB;AAEnB,MAAM,gBAAgB,YAAY;AAAA,EACvC,WAAW,qBAAqB;AAAE,WAAO,CAAC,MAAM,WAAW,gBAAgB,OAAO;AAAA,EAAG;AAAA,EAErF,cAAc;AACZ,UAAM;AACN,SAAK,KAAK,IAAI,UAAU,IAAI;AAC5B,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,oBAAoB;AAClB,SAAK,QAAQ;AACb,SAAK,WAAW;AAGhB,SAAK,iBAAiB,SAAS,KAAK,YAAY;AAAA,EAClD;AAAA,EAEA,uBAAuB;AACrB,SAAK,oBAAoB,SAAS,KAAK,YAAY;AAAA,EACrD;AAAA,EAEA,2BAA2B;AACzB,QAAI,KAAK,YAAa,MAAK,QAAQ;AAAA,EACrC;AAAA,EAEA,IAAI,KAAK;AAAE,WAAO,KAAK,aAAa,IAAI,KAAK;AAAA,EAAI;AAAA,EACjD,IAAI,UAAU;AAAE,WAAO,KAAK,aAAa,SAAS;AAAA,EAAG;AAAA,EACrD,IAAI,cAAc;AAAE,WAAO,KAAK,aAAa,cAAc,KAAK;AAAA,EAAU;AAAA,EAC1E,IAAI,QAAQ;AAAE,WAAO,KAAK,aAAa,OAAO;AAAA,EAAG;AAAA,EAEjD,UAAU;AACR,SAAK,MAAM,SAAS;AACpB,SAAK,MAAM,iBAAiB,KAAK,MAAM,kBAAkB;AACzD,SAAK,aAAa,QAAQ,MAAM;AAChC,SAAK,aAAa,YAAY,GAAG;AAGjC,SAAK,mBAAmB;AAAA,EAC1B;AAAA,EAEA,aAAa;AAEX,SAAK,GAAG,UAAU,aAAa,CAAC,QAAQ;AACtC,WAAK,cAAc,IAAI,MAAM,QAAQ;AACrC,WAAK,mBAAmB;AAAA,IAC1B,GAAG,EAAE,UAAU,KAAK,CAAC;AAAA,EACvB;AAAA,EAEA,eAAe,CAAC,MAAM;AACpB,MAAE,eAAe;AAEjB,QAAI,CAAC,KAAK,GAAI;AAEd,SAAK,GAAG,QAAQ;AAAA,MACd,OAAO,KAAK,UAAU,gBAAgB;AAAA,MACtC,MAAM,EAAE,MAAM,KAAK,GAAG;AAAA,IACxB,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB;AACnB,UAAM,WAAW,KAAK,QAClB,KAAK,gBAAgB,KAAK,KAC1B,KAAK,YAAY,WAAW,KAAK,EAAE;AAEvC,QAAI,UAAU;AACZ,WAAK,UAAU,IAAI,KAAK,WAAW;AAAA,IACrC,OAAO;AACL,WAAK,UAAU,OAAO,KAAK,WAAW;AAAA,IACxC;AAAA,EACF;AACF;AAEA,eAAe,OAAO,YAAY,OAAO;AACzC,IAAO,mBAAQ;",
  "names": []
}
