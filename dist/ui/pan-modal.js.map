{
  "version": 3,
  "sources": ["../../pan/ui/pan-modal.mjs"],
  "sourcesContent": ["// <pan-modal> \u2014 Modal dialog with PAN topic control\n// Attributes:\n//   - topic: Topic to subscribe for show/hide (default: modal.{id})\n//   - modal-id: Identifier for this modal\n//   - title: Modal title\n//   - size: sm, md, lg, xl, full (default: md)\n//   - closable: Show close button (default: true)\n//\n// Topics:\n//   - Subscribes: {topic}.show, {topic}.hide, {topic}.toggle\n//   - Publishes: {topic}.opened, {topic}.closed, {topic}.action\n//\n// Slots:\n//   - default: Modal content\n//   - header: Custom header\n//   - footer: Custom footer with actions\n\nimport { PanClient } from './pan-client.mjs';\n\nexport class PanModal extends HTMLElement {\n  static get observedAttributes() {\n    return ['topic', 'modal-id', 'title', 'size', 'closable'];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.pc = new PanClient(this);\n    this.isOpen = false;\n  }\n\n  connectedCallback() {\n    this.render();\n    this.setupTopics();\n    this.setupEvents();\n  }\n\n  attributeChangedCallback() {\n    if (this.isConnected) this.render();\n  }\n\n  get modalId() { return this.getAttribute('modal-id') || 'default'; }\n  get topic() { return this.getAttribute('topic') || `modal.${this.modalId}`; }\n  get title() { return this.getAttribute('title') || ''; }\n  get size() { return this.getAttribute('size') || 'md'; }\n  get closable() { return this.getAttribute('closable') !== 'false'; }\n\n  setupTopics() {\n    this.pc.subscribe(`${this.topic}.show`, () => this.show());\n    this.pc.subscribe(`${this.topic}.hide`, () => this.hide());\n    this.pc.subscribe(`${this.topic}.toggle`, () => this.toggle());\n  }\n\n  setupEvents() {\n    const backdrop = this.shadowRoot.querySelector('.modal-backdrop');\n    const closeBtn = this.shadowRoot.querySelector('.close-btn');\n\n    if (backdrop) {\n      backdrop.addEventListener('click', (e) => {\n        if (e.target === backdrop && this.closable) {\n          this.hide();\n        }\n      });\n    }\n\n    if (closeBtn) {\n      closeBtn.addEventListener('click', () => this.hide());\n    }\n\n    // Escape key\n    this.handleKeydown = (e) => {\n      if (e.key === 'Escape' && this.isOpen && this.closable) {\n        this.hide();\n      }\n    };\n    document.addEventListener('keydown', this.handleKeydown);\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  show() {\n    if (this.isOpen) return;\n    this.isOpen = true;\n    const backdrop = this.shadowRoot.querySelector('.modal-backdrop');\n    if (backdrop) {\n      backdrop.classList.add('active');\n      document.body.style.overflow = 'hidden';\n    }\n    this.pc.publish({\n      topic: `${this.topic}.opened`,\n      data: { modalId: this.modalId }\n    });\n  }\n\n  hide() {\n    if (!this.isOpen) return;\n    this.isOpen = false;\n    const backdrop = this.shadowRoot.querySelector('.modal-backdrop');\n    if (backdrop) {\n      backdrop.classList.remove('active');\n      document.body.style.overflow = '';\n    }\n    this.pc.publish({\n      topic: `${this.topic}.closed`,\n      data: { modalId: this.modalId }\n    });\n  }\n\n  toggle() {\n    this.isOpen ? this.hide() : this.show();\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: contents;\n        }\n\n        .modal-backdrop {\n          display: none;\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.5);\n          z-index: 1000;\n          align-items: center;\n          justify-content: center;\n          backdrop-filter: blur(4px);\n          opacity: 0;\n          transition: opacity 0.2s ease;\n        }\n\n        .modal-backdrop.active {\n          display: flex;\n          opacity: 1;\n        }\n\n        .modal-content {\n          background: var(--modal-bg, #ffffff);\n          border-radius: var(--modal-radius, 0.75rem);\n          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);\n          max-height: 90vh;\n          display: flex;\n          flex-direction: column;\n          transform: scale(0.95);\n          transition: transform 0.2s ease;\n        }\n\n        .modal-backdrop.active .modal-content {\n          transform: scale(1);\n        }\n\n        .modal-content.size-sm { width: 400px; max-width: 90vw; }\n        .modal-content.size-md { width: 600px; max-width: 90vw; }\n        .modal-content.size-lg { width: 800px; max-width: 90vw; }\n        .modal-content.size-xl { width: 1200px; max-width: 95vw; }\n        .modal-content.size-full { width: 95vw; height: 95vh; max-height: 95vh; }\n\n        .modal-header {\n          padding: 1.5rem;\n          border-bottom: 1px solid var(--modal-border, #e2e8f0);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .modal-title {\n          font-size: 1.25rem;\n          font-weight: 600;\n          color: var(--modal-title-color, #1e293b);\n          margin: 0;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 1.5rem;\n          color: var(--modal-close-color, #64748b);\n          cursor: pointer;\n          padding: 0.25rem;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 0.375rem;\n          transition: all 0.2s;\n        }\n\n        .close-btn:hover {\n          background: var(--modal-close-hover-bg, #f1f5f9);\n          color: var(--modal-close-hover-color, #1e293b);\n        }\n\n        .modal-body {\n          padding: 1.5rem;\n          overflow-y: auto;\n          flex: 1;\n          color: var(--modal-text-color, #334155);\n        }\n\n        .modal-footer {\n          padding: 1.5rem;\n          border-top: 1px solid var(--modal-border, #e2e8f0);\n          display: flex;\n          gap: 0.75rem;\n          justify-content: flex-end;\n          background: var(--modal-footer-bg, #f8fafc);\n        }\n\n        .hidden {\n          display: none;\n        }\n      </style>\n\n      <div class=\"modal-backdrop\">\n        <div class=\"modal-content size-${this.size}\" role=\"dialog\" aria-modal=\"true\">\n          <div class=\"modal-header\">\n            <slot name=\"header\">\n              ${this.title ? `<h2 class=\"modal-title\">${this.title}</h2>` : ''}\n            </slot>\n            ${this.closable ? `\n              <button class=\"close-btn\" aria-label=\"Close\">&times;</button>\n            ` : ''}\n          </div>\n\n          <div class=\"modal-body\">\n            <slot></slot>\n          </div>\n\n          <div class=\"modal-footer ${this.querySelector('[slot=\"footer\"]') ? '' : 'hidden'}\">\n            <slot name=\"footer\"></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('pan-modal', PanModal);\nexport default PanModal;\n"],
  "mappings": "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",
  "names": []
}
